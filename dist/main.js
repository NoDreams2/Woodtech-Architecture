let swiperImg=new Swiper(".swiper-container",{loop:!1,speed:2400,spaceBetween:"2%",autoplay:{delay:6e3,disableOnInteraction:!1},on:{init:function(){updateCounter(this)},slideChange:function(){updateCounter(this)}},scrollbar:{el:".swiper-scrollbar",draggable:!0},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}}),swiperContainer=document.querySelector(".swiper-container"),observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&.2<=e.intersectionRatio?swiperImg.autoplay.start():swiperImg.autoplay.stop()})},{threshold:[.2]});function updateCounter(e){var t=document.querySelector(".hero__current-count"),r=document.querySelector(".hero__total-count"),a=e.realIndex+1;t.textContent=a<10?"0"+a:a,r.textContent=e.slides.length<10?"0"+e.slides.length:e.slides.length}observer.observe(swiperContainer);let loadMoreButton=document.getElementById("load-more"),hideButton=document.getElementById("hide-cards"),projectsCardsContainer=document.getElementById("projects-cards"),allCards=[],displayedCards=3,cardTemplate=`
    <article class="col-md-4 card-best-work">
        <div class="card-best-work__image-container">
            <div class="card-best-work__image-wrapper">
                <img class="img-responsive card-best-work__img" src="%IMAGE%" alt="%ALT%">
            </div>
        </div>
        <a href="#!" class="card-best-work__location-link">
            <img class="card-best-work__location-icon" src="../images/card-best-work/icon/mapmarker.svg" alt="Иконка обозначающая локацию">
            <span class="card-best-work__location-text">%LOCATION%</span>
        </a>
        <a href="#!" class="card-best-work__desc-link">
            <svg class="card-best-work__desc-icon" width="20" height="35" viewBox="0 0 5 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="2.5" cy="2.5" r="2.5" fill="currentColor"/>
                <circle cx="2.5" cy="17.5" r="2.5" fill="currentColor"/>
                <circle cx="2.5" cy="32.5" r="2.5" fill="currentColor"/>
            </svg>
            <p class="card-best-work__desc-text">%DESC%</p>
        </a>
    </article>
`;async function loadCards(){try{var e=await(await fetch("./projects.json")).json();return allCards=e}catch(e){console.error("Error loading data:",e)}}function addCards(e){let t=document.createDocumentFragment();allCards.slice(0,e).forEach(e=>{e=cardTemplate.replace("%IMAGE%",e.image).replace("%ALT%",e.alt).replace("%LOCATION%",e.location).replace("%DESC%",e.desc);t.appendChild((new DOMParser).parseFromString(e,"text/html").body.firstChild)}),projectsCardsContainer.innerHTML="",projectsCardsContainer.appendChild(t)}loadCards().then(()=>{addCards(displayedCards)}),loadMoreButton.addEventListener("click",()=>{0<allCards.length-displayedCards&&addCards(displayedCards=Math.min(displayedCards+3,allCards.length)),loadMoreButton.style.display=displayedCards<allCards.length?"block":"none",hideButton.style.display=displayedCards>=allCards.length?"block":"none"}),hideButton.addEventListener("click",()=>{addCards(displayedCards=3),loadMoreButton.style.display="block",hideButton.style.display="none"}),hideButton.style.display="none";let mobileNav=document.querySelector(".header__mobile-navigation"),mobileMenu=document.querySelector(".mobile-menu"),header=document.querySelector(".header"),headerContainer=document.querySelector(".header__container");mobileNav.addEventListener("click",()=>{mobileMenu.classList.contains("open")?(mobileMenu.style.height="0",mobileMenu.classList.remove("open")):(mobileMenu.style.height="0",mobileMenu.classList.add("open"),requestAnimationFrame(()=>{var e=header.offsetHeight,t=mobileMenu.scrollHeight+"px";mobileMenu.style.height=t,mobileMenu.style.top=e+"px"}))}),document.addEventListener("click",e=>{var t=mobileMenu.contains(e.target),e=mobileNav.contains(e.target);t||e||!mobileMenu.classList.contains("open")||(mobileMenu.style.height="0",mobileMenu.classList.remove("open"))}),window.addEventListener("scroll",()=>{0<window.scrollY?(header.classList.add("scrolled"),headerContainer.classList.add("scrolled")):(header.classList.remove("scrolled"),headerContainer.classList.remove("scrolled"))});